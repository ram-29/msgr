const btnHeaderSetting=$("#btn-header-setting"),btnHeaderMessage=$("#btn-header-message"),sidebarListItem=$("#sidebar-list-item"),btnListItemSetting=$("#btn-list-item-setting"),contentChatboxList=$(".msgr-main-content-chatbox-list > .os-padding > .os-viewport > .os-content"),contentChatboxInputBox=$("#content-chatbox-input-box"),btnChatboxPhoto=$("#btn-chatbox-photo"),btnChatboxFile=$("#btn-chatbox-file"),btnChatboxEmoji=$("#btn-chatbox-emoji"),btnChatboxSend=$("#btn-chatbox-send"),btnUserChat=$("#btn-user-chat"),btnUserGroup=$("#btn-user-group"),BASE_URL="http://bk.msgr.io";let socket=null;const connect=(t,n,e,s)=>{const i=$.param({id:e,name:s});(socket=io(`http://localhost:1337/${n}`,{query:i})).on("connect",t=>console.log(`You connected to ${n}`)),socket.on("disconnect",t=>console.log(`You disconnected to ${n}`)),socket.on("chat",t=>{const{message:n,timestamp:e}=t,s=`\n            <div class="msgr-main-content-chatbox-list-item">\n                <span>${e}</span>\n\n                <div class="msgr-main-content-chatbox-list-item-details">\n                    <img class="img-circle" src="/img/1.png" alt="User image">\n                    <div class="msgr-main-content-chatbox-list-item-details-content">\n                        <p>${n}</p>\n                    </div>\n                </div>\n            </div>\n        `;contentChatboxList.append(s),contentChatboxList.scrollTop(contentChatboxList.scrollHeight)});const a=t.firstElementChild.children[0].src;$(".msgr-main-content-chatbox-header > img").attr("src",a);const o=t.firstElementChild.children[1].children[0].textContent;$(".msgr-main-header-details > h4").text(o),$(".msgr-main-content-chatbox-header-details > h4").text(o)};contentChatboxInputBox.on("keydown",t=>{if(13===t.keyCode&&!t.shiftKey&&(t.preventDefault(),socket)){const n=moment().format("MMM DD, YYYY, hh:mm a"),e=t.target.value,s=`\n                <div class="msgr-main-content-chatbox-list-item">\n                    <span>${n}</span>\n\n                    <div class="msgr-main-content-chatbox-list-item-details owner">\n                        <img class="img-circle" src="/img/1.png" alt="User image">\n                        <div class="msgr-main-content-chatbox-list-item-details-content">\n                            <p>${e}</p>\n                        </div>\n                    </div>\n                </div>\n            `;contentChatboxList.append(s),socket.emit("chat",{message:e,timestamp:n})}});const initCon=(t,n)=>{axios.get(`${BASE_URL}/api/member/${t}?expand=threads`).then(e=>{const s=e.data.threads.map(e=>`\n                <div class="msgr-sidebar-list-item" onClick="connect(this, '${e.id}', '${t}', '${n}')">\n                    <div class="msgr-sidebar-list-item-content">\n                        <img class="img-circle" src="/img/${"GROUP"==e.type?"3":"1"}.png" alt="User image">                        \n                        <div class="msgr-sidebar-list-item-content-details">\n                            <h4>${e.name}</h4>\n                            <p>${e.message?e.message.latest:"-"}</p>\n                        </div>\n                    </div>\n    \n                    <div class="msgr-sidebar-list-item-settings">\n                        <span>${e.message?moment(e.message.time).format("ddd"):"-"}</span>\n                        <button type="button" id="btn-list-item-setting" class="btn btn-default btn-sm"><i class="fa fa-cog fa-fw"></i></button>\n                    </div>\n                </div>\n            `).join("");$(".msgr-sidebar-list").html(s),$(".msgr-sidebar-list").overlayScrollbars({})})};swal.mixin({input:"text",confirmButtonText:"Next &rarr;",progressSteps:["1","2"],showCloseButton:!1,allowOutsideClick:!1,showCancelButton:!1}).queue(["Enter ID","Enter Name"]).then(t=>{if(t.value){const n=t.value[0],e=t.value[1];initCon(n,e)}});